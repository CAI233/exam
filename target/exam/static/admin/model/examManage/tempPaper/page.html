<div id="tempPaper">
    <div class="content_main">
        <div class="content_page">
            <div class="list_bar_row" style="margin-top:10px;margin-bottom:0px;">
                <div class="bars" style="float:left;">
                    <button class="layui-btn layui-btn-small layui-btn-normal iconfont icon-jia" ng-click="addTemplate()" ng-mouseover="btnTip($event,'新增模板')" ng-show="getBtnToken('tempPaper_add')"></button>
                    <button class="layui-btn layui-btn-small layui-btn-warm iconfont icon-bi" ng-click="updateTemplate()" ng-mouseover="btnTip($event,'修改模板')" ng-show="getBtnToken('tempPaper_update')"></button>
                    <button class="layui-btn layui-btn-small layui-btn-danger iconfont icon-shanchu" ng-click="delTemplate()" ng-mouseover="btnTip($event,'删除模板')" ng-show="getBtnToken('tempPaper_del')"></button>
                    <!--<button class="layui-btn layui-btn-small layui-btn-danger iconfont icon-jiaru" ng-click="copyTemplate()" ></button>-->
                </div>
                <div class="search_plan">
                    <div class="input_group">
                        <input class="layui-input" type="text" placeholder="模糊搜索" ng-model="param.searchText">
                        <span class="group_addon layui-btn layui-btn-normal iconfont icon-sousuo1" ng-click="reload()"
                              ng-mouseover="btnTip($event,'搜索')"></span>&nbsp;&nbsp;
                        <span class="group_addon layui-btn  layui-btn-normal iconfont icon-qingkong" ng-click="Dreload()"
                              ng-mouseover="btnTip($event,'清空')"></span>
                    </div>
                </div>
            </div>
            <!-- 列表 -->
            <grid-table data-control="tableControl"></grid-table>
        </div>
    </div>

    <!--模板属性-->
    <div class="form_content animated form_sm none">
        <div class="form_title">
            <a href="javascript:void(0)" ng-click="formClose()" class="back_link">关闭</a>
            <div class="form_btns">
                <button class="layui-btn layui-btn-normal"  ng-click="templateSubmit()" lay-submit lay-filter="form1">保存</button>
            </div>
        </div>
        <div class="form_content_Y">
            <form class="form_html">
                <div class="row">
                    <div class="layui-form-item col-xs-12">
                        <label class="layui-form-label"><em>*</em>模板标题:</label>
                        <div class="layui-input-block">
                            <input class="layui-input"  type="text"  maxlength="400" ng-model="template.template_title" >
                        </div>
                    </div>
                </div>
                <div class="row">
                    <div class="layui-form-item col-xs-12">
                        <label class="layui-form-label"><em>*</em>试卷类别:</label>
                        <div class="layui-input-block">
                            <div class="layui-unselect layui-form-select">
                                <div class="layui-select-title">
                                    <input type="text" class="layui-input layui-unselect" readonly="readonly" value=""
                                           placeholder="请选择" ng-model="template.type_name"/>
                                    <i class="layui-edge"></i>
                                </div>
                                <dl class="layui-anim layui-anim-upbit">
                                    <dd ng-repeat="item in categoryData"
                                        ng-click="template.template_type=item.id;template.type_name=item.dic_name;"
                                        ng-class="{'layui-this':template.type_name == item.dic_name}">{{item.dic_name}}
                                    </dd>
                                </dl>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="row">
                    <div class="layui-form-item col-xs-12">
                        <label class="layui-form-label"><em>*</em>时长:</label>
                        <div class="layui-input-block">
                            <input type="number" class=" layui-input" ng-model="template.test_long" />
                        </div>
                    </div>
                </div>
                <div class="row">
                    <div class="layui-form-item col-xs-12">
                        <label class="layui-form-label"><em>*</em>总分:</label>
                        <div class="layui-input-block">
                            <input type="number" class=" layui-input" ng-model="template.test_total" />
                        </div>
                    </div>
                </div>
                <div class="row">
                    <div class="layui-form-item col-xs-12">
                        <label class="layui-form-label"><em>*</em>及格分数:</label>
                        <div class="layui-input-block">
                            <input type="number" class="layui-input"  ng-model="template.test_pass" maxlength="3" />
                        </div>
                    </div>
                </div>


                <div class="row">
                    <div class="layui-form-item col-xs-12">
                        <label class="layui-form-label">模板描述:</label>
                        <div class="layui-input-block">
                            <textarea class="layui-textarea" ng-model="template.remark" style="resize:none;" maxlength="400"/>
                        </div>
                    </div>
                </div>

            </form>
        </div>
    </div>
    <!--试题配置-->
    <div class="form_content3 animated none">
        <div class="form_title" style="position: relative">
            <a href="javascript:void(0)" ng-click="formClose3()" class="back_link">关闭</a>
            <span style="width: 250px;position: absolute;font-size: 16px;font-weight: 600;line-height: 38px;top: 10px;left: 50%;margin-left: -125px">{{template.template_title}}</span>
            <div class="form_btns">
                <button class="layui-btn layui-btn-normal"  ng-click="subjectSubmit()" lay-submit lay-filter="form1">保存</button>
            </div>
        </div>

        <div class="form_content_Y">
            <form class="form_html layui-form" ng-submit="subjectSubmitToForm()" id="myExamTemplateForm()">
                <div class="content_page_left" id="selknow">
                    <div class="layui-form-item" style="border-bottom:1px solid #E2E7EB;background: #1b92e2;color: #fff;margin: 0">
                        <div class="dropdown col-xs-12">
                            <div class="input_group"
                                 style="display: block;text-align: center;height: 40px;line-height: 40px;cursor: pointer;">
                                <a class="title text-overflow" style="color: #fff;font-weight: bold;font-size:15px">知识点</a>
                            </div>
                        </div>
                    </div>
                    <div id="col_comTree">
                        <ul id="selknowTree2" style="overflow-x: auto;height: 100%;"></ul>
                    </div>
                </div>
                <ul ng-if="template" style="padding: 0 20px">
                    <li ng-repeat="dati in template.templateDetailCondition.datiList track by $index" class="dati-model-plan" ng-click="selectDati(dati)">
                        <div class="dati-model">
                            <div class="model-title row">
                                <div class="col-xs-3">
                                    <input class="layui-input" type="text"  ng-model="dati.subject_large_title" placeholder="例：一、单项选择题" lay-verify="required">
                                </div>
                                <div class="col-xs-3">
                                    <div class="layui-unselect layui-form-select">
                                        <div class="layui-select-title">
                                            <input type="text" class="layui-input layui-unselect" readonly="readonly" value="" placeholder="课程" ng-model="dati.subject_curriculum_name" lay-verify="required"/>
                                            <i class="layui-edge"></i>
                                        </div>
                                        <dl class="layui-anim layui-anim-upbit">
                                            <dd ng-repeat="type in curriculumData"
                                                ng-click="setExamCurriculum(dati, type)"
                                                ng-class="{'layui-this':dati.subject_curriculum == type.id}">{{type.dic_name}}
                                            </dd>
                                        </dl>
                                    </div>
                                </div>
                                <div class="col-xs-3">
                                    <div class="layui-unselect layui-form-select">
                                        <div class="layui-select-title">
                                            <input type="text" class="layui-input layui-unselect" readonly="readonly" value=""
                                                   placeholder="题型" ng-model="dati.subject_type_name" lay-verify="required"/>
                                            <i class="layui-edge"></i>
                                        </div>
                                        <dl class="layui-anim layui-anim-upbit">
                                            <dd ng-repeat="type in subTypeList"
                                                ng-click="setExamType(dati, type)"
                                                ng-class="{'layui-this':dati.subject_type == type.id}">{{type.dic_name}}
                                            </dd>
                                        </dl>
                                    </div>
                                </div>
                                <button class="layui-btn layui-btn-danger iconfont icon-shanchu" ng-click="removeMaxExam(dati)" ng-mouseover="btnTip($event,'删除模块')"></button>
                                <a ng-if="$index!=0" class="layui-btn layui-btn-danger iconfont icon-shangsheng1" ng-click="upMaxExam(dati,$index)" ng-mouseover="btnTip($event,'上移')"></a>
                                <a ng-if="$index!=template.templateDetailCondition.datiList.length-1" class="layui-btn layui-btn-danger iconfont icon-xiajiang" ng-click="downMaxExam(dati,$index)" ng-mouseover="btnTip($event,'下移')"></a>
                            </div>
                            <div class="row">
                                <div class="col-xs-3">
                                    <input class="layui-input" type="number" min="0" maxlength="2" lay-verify="required"  onmousewheel="return false;" ng-change="addSmallExam(dati)"  ng-model="dati.subject_amount" oninput="if(value.length>2)value=value.slice(0,2)"  onkeyup="this.value=this.value.replace(/[^\d]/g,'')" placeholder="小题总数"/>
                                </div>
                                <div class="col-xs-3">
                                    <input class="layui-input" type="number" min="0" lay-verify="required" onmousewheel="return false;" oninput="if(value.length>2)value=value.slice(0,2)" onkeyup="this.value=this.value.replace(/[^\d]/g,'')" ng-model="dati.marks" ng-change="changeMarks(dati)" placeholder="每小题分数" />
                                </div>
                                <div class="col-xs-3">
                                    <input class="layui-input" type="number" maxlength="2" lay-verify="required"  ng-model="dati.subject_marks" readonly="readonly" placeholder="总分" />
                                </div>
                            </div>
                            <div class="row">
                                <div class="col-xs-9">
                                    <textarea class="layui-textarea" placeholder="大题描述" ng-model="dati.subject_remark" ></textarea>
                                </div>
                            </div>
                            <div class="row" ng-repeat="xiaoti in dati.xiaotiList" ng-class="{'row_select': xt == xiaoti}" ng-click="selectXiaoti(xiaoti, dati)">
                                <input class="layui-input num" style="width:50px;float: left;margin: 0 15px" type="text" lay-verify="required" onmousewheel="return false;" ng-model="xiaoti.subject_sort" oninput="if(value.length>3)value=value.slice(0,3)" onkeyup="this.value=this.value.replace(/[^\d]/g,'')" placeholder="题号"/>
                                <input class="layui-input num" style="width:50px;float: left" type="text" lay-verify="required" onmousewheel="return false;" ng-model="xiaoti.subject_marks" oninput="if(value.length>2)value=value.slice(0,2)" ng-change="changeSmallMarks(dati)" onkeyup="this.value=this.value.replace(/[^\d]/g,'')" placeholder="分数"/>
                                <div class="col-xs-666">
                                    <input class="layui-input" type="text"  ng-model="xiaoti.know_name" readonly="readonly" lay-verify="required" placeholder="请选择知识点"/>
                                </div>
                            </div>
                        </div>
                    </li>
                    <li>
                        <div style="text-align: center;padding: 15px 0">
                            <button type="button" ng-click="addMaxExam(template.templateDetailCondition.datiList)" class="layui-btn layui-btn-normal">添加一个模块</button>
                            <button lay-filter="form1" lay-submit="" id="template_save" class="layui-btn layui-btn-normal" style="opacity: 0;position: absolute;top: 10px;right: 15px;">保存</button>
                        </div>
                    </li>
                </ul>
            </form>
        </div>
    </div>
</div>